<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neelkanth Trades</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #f7f7f7;
}

/* HEADER */
.header-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 20px;
    background: #0f8a52;
    color: white;
}
.cart-icon {
    background: white;
    color: #0f8a52;
    padding: 6px 12px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
}

/* ===== SEARCH ===== */
.search-bar-wrapper {
    padding: 10px 20px;
    background: #e9f5ef;
    position: relative;
}
.search-box {
    display: flex;
    gap: 8px;
}
#homeSearchInput {
    flex: 1;
    padding: 12px;
    font-size: 16px;
    border-radius: 8px;
    border: 1px solid #ccc;
}
.search-btn {
    background: #0f8a52;
    border: none;
    color: white;
    padding: 12px 14px;
    border-radius: 8px;
    font-size: 18px;
    cursor: pointer;
}
.search-suggestions {
    background: white;
    margin-top: 6px;
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0,0,0,.15);
    display: none;
    max-height: 220px;
    overflow-y: auto;
    position: absolute;
    left: 20px;
    right: 20px;
    z-index: 2000;
}
.search-suggestions div {
    padding: 10px;
    cursor: pointer;
}
.search-suggestions div.active,
.search-suggestions div:hover {
    background: #e6f4ec;
}
mark {
    background: #c8f7dc;
    padding: 0 3px;
}

/* Banner */
.banner {
    background: linear-gradient(135deg, #0f8a52, #0d6e44);
    color: white;
    padding: 40px 20px;
    text-align: center;
}
.banner h1 { margin: 0; font-size: 34px; }
.banner p { margin-top: 10px; font-size: 18px; opacity: 0.9; }
.btn-shop {
    margin-top: 20px;
    padding: 12px 25px;
    background: #ffffff;
    color: #0f8a52;
    border-radius: 6px;
    font-weight: bold;
    text-decoration: none;
}

/* Categories */
.categories {
    display: flex;
    justify-content: space-around;
    padding: 30px 10px;
    text-align: center;
}
.cat-box {
    width: 28%;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    cursor: pointer;
}
.cat-box img { width: 70px; margin-bottom: 10px; }

/* Products */
.products { padding: 20px; }
.product-card {
    width: 180px;
    background: white;
    padding: 15px;
    border-radius: 12px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    margin: 12px;
    display: inline-block;
    text-align: center;
}
.product-card img {
    width: 140px;
    height: 140px;
    object-fit: cover;
}

footer {
    background: #0d6e44;
    padding: 20px;
    text-align: center;
    color: white;
    margin-top: 40px;
}

.whatsapp-float {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #25d366;
    color: white;
    padding: 15px;
    border-radius: 50%;
    font-size: 28px;
    text-decoration: none;
    z-index: 999;
}
.cart-float {
    position: fixed;
    bottom: 90px;
    right: 20px;
    background: #0f8a52;
    color: white;
    padding: 15px;
    border-radius: 50%;
    font-size: 24px;
    text-decoration: none;
    z-index: 999;
}
</style>

<script src="js/main.js" defer></script>
<script src="js/products.js" defer></script>
</head>

<body>

<div class="header-bar">
    <h3 style="margin:0;">Neelkanth Trades</h3>
    <div onclick="location.href='cart.html'" class="cart-icon">
        üõí <span id="cartCount">0</span>
    </div>
</div>

<!-- SEARCH -->
<div class="search-bar-wrapper">
    <div class="search-box">
        <input id="homeSearchInput" placeholder="Search products (name / unit)">
        <button class="search-btn">üîç</button>
    </div>
    <div id="homeSuggestions" class="search-suggestions"></div>
</div>

<!-- Banner -->
<div class="banner">
    <h1>Neelkanth Trades</h1>
    <p>Best Price, Fast Delivery</p>
    <a href="shop.html" class="btn-shop">Shop Now</a>
</div>

<!-- Categories -->
<div class="categories">
    <div class="cat-box" onclick="location.href='shop.html'">
        <img src="img/grocery.png"><h3>Grocery</h3>
    </div>
    <div class="cat-box" onclick="location.href='shop.html'">
        <img src="img/cosmetics.png"><h3>Cosmetics</h3>
    </div>
    <div class="cat-box" onclick="location.href='shop.html'">
        <img src="img/hygiene.png"><h3>Hygiene</h3>
    </div>
</div>

<div class="products">
    <h2>Popular Products</h2>
    <div id="home-products"></div>
</div>

<footer>
Neelkanth Trades<br>
#394, Sector 3, Industrial Area, Karnal<br>
Phone: 9416110032
</footer>

<a class="cart-float" href="cart.html">üõí</a>
<a class="whatsapp-float" href="https://wa.me/919416110032">üí¨</a>

<script>
let activeIndex = -1;
const input = document.getElementById("homeSearchInput");
const box = document.getElementById("homeSuggestions");
const btn = document.querySelector(".search-btn");

function redirectToShop(text) {
    if (!text.trim()) return;
    window.location.href = `shop.html?search=${encodeURIComponent(text)}`;
}

/* SHOW SUGGESTIONS ONLY */
input.addEventListener("input", e => {
    const query = e.target.value.toLowerCase();
    box.innerHTML = "";
    activeIndex = -1;

    if (!query) { box.style.display = "none"; return; }

    document.querySelectorAll("#home-products h4").forEach(h => {
        if (h.innerText.toLowerCase().includes(query)) {
            const div = document.createElement("div");
            div.innerText = h.innerText;
            div.onclick = () => redirectToShop(h.innerText);
            box.appendChild(div);
        }
    });

    box.style.display = box.children.length ? "block" : "none";
});

/* KEYBOARD */
input.addEventListener("keydown", e => {
    const items = box.querySelectorAll("div");

    if (e.key === "ArrowDown") activeIndex = Math.min(activeIndex + 1, items.length - 1);
    if (e.key === "ArrowUp") activeIndex = Math.max(activeIndex - 1, 0);

    if (e.key === "Enter") {
        if (activeIndex >= 0 && items[activeIndex]) {
            redirectToShop(items[activeIndex].innerText);
        } else {
            redirectToShop(input.value);
        }
    }

    items.forEach((el,i)=>el.classList.toggle("active", i===activeIndex));
});

/* BUTTON */
btn.onclick = () => redirectToShop(input.value);

/* CLICK OUTSIDE */
document.addEventListener("click", e => {
    if (!document.querySelector(".search-bar-wrapper").contains(e.target)) {
        box.style.display = "none";
    }
});
</script>

</body>
</html>
